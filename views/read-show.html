{# This is a swig-templated HTML file #}
{# http://paularmstrong.github.com/swig/ #}

{% comment %}

 show_tab.html - "Show" tab, included from read.html
 Copyright (C) 2012 HostileFork.com

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as
 published by the Free Software Foundation, either version 3 of the
 License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.

 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.

   See http://hostilefork.com/blackhighlighter for documentation.

{% endcomment %}

<p>Here is the letter in its current viewable form.  Blacked out
portions have been protected by the author and have not been revealed
on the server (or by a certificate local to your browser).  Text you see 
with a yellow background has been verified in your browser, but hasn't
been revealed to the server.  Text with a green background was at 
one time hidden but has since been published to the general public.</p>

{# We generate the public HTML on the server side because we want the page to be readable without JavaScript #}
{# REVIEW: ensure we've sanitized the HTML, as we are using the "raw" filter! #}
<div class="textarea-wrapper">
	<div class="document-display" id="letter-text">
	{{ public_html|raw }}
	</div>
</div>

<p>You can either add new verification certificates to read the letter, or if you
choose, reveal its contents.</p>

<div id="buttons-show-before">
	<center><p>
		<a href="#" onclick="BlackhighlighterRead.previousStep(); return true;">add &amp; remove certificates</a>
	</p></center>
</div>

<div id="buttons-show-after">
	<center><p>
		<a href="#" onclick="BlackhighlighterRead.previousStep(); return true;">add &amp; remove certificates</a>
		-or- &nbsp; 
		<button onclick="BlackhighlighterRead.nextStep(); return true;">
			Optional Step: <b>Reveal</b>
		</button>
	</p></center>
</div>

<!-- "Helpful" info box -->
<div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;"><p>
	<span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
  	<strong>Note:</strong> This is a letter on a blackhighlighter system.  If you have any
  	question about what that means, see <a href="http://hostilefork.com/blackhighlighter/" target="_blank">
  	http://hostilefork.com/blackhighlighter/</a>.
</p></div>