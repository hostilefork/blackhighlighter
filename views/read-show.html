{# This is a swig-templated HTML file #}
{# http://paularmstrong.github.com/swig/ #}

{% comment %}

 show_tab.html - "Show" tab, included from read.html
 Copyright (C) 2012 HostileFork.com

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as
 published by the Free Software Foundation, either version 3 of the
 License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.

 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.

   See http://blackhighlighter.hostilefork.com for documentation.

{% endcomment %}

<div class="tabs-content" id="tabs-show">

	<div class="leading-section">
		<p>Here is the letter in its current viewable form. Blacked out portions were protected by the author.<p>
		<ul>
		<li>Text with a <span style="color: yellow;">yellow</span> background was protected by the author, but has been verified <i>in your browser only</i></li>
		<li>Text with a <span style="color: green;">green</span> background was at one time protected, but has since been revealed to the general public.</li>
		</ul>
	</div>

	{# We generate the public HTML on the server side because we want the page to be readable without JavaScript #}
	{# REVIEW: ensure we've sanitized the HTML, as we are using the "raw" filter! #}
	<div class="textarea-wrapper">
		<div id="editor">
		{{ public_html|raw }}
		</div>
	</div>

	<div class="trailing-section">
		<p>You can either add new verification certificates to read the letter, or if you choose, reveal its contents.</p>

		<div class="action-buttons">
			<div id="buttons-show-before">
				<a href="#" class="previous-step">add &amp; remove certificates</a>
			</div>

			<div id="buttons-show-after">
				<a href="#" class="previous-step">add &amp; remove certificates</a>
				-or-
				<button class="next-step">
					Optional Step: <b>Reveal</b>
				</button>
			</div>
		</div>

	{% comment %}
		<!-- Each accordion div should look like this -->
		<div title='{# hash #}'>
			<a href="#">{# Local or Server #} Certificate: {# id #}</a>
			<div>
			{# JSON certificate text #}
			<form>
				<input type="button" value="Remove" name="button1" onclick="(code to remove this certificate)" />
			</form>
			</div>
		</div>
	{% endcomment %}
		<!--
		<div id="accordion">
		{% for certificate in all_certificates %}
			<div title='{{ certificate.sha256 }}'>
			{% if true %}
				<a href="#">Certificate {{ forloop.counter }}: Revealed on {{ certificate.reveal_date }}</a>
			{% else %}
				<a href="#">Certificate {{ forloop.counter }}: Not Revealed to Public</a>
			{% endif %}
				<div>
					<i>For the moment, Javascript is required to see details of the reveal!</i>
				</div>
			</div>
		{% endfor %}
		</div>
		-->

		<div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;"><p>
			<span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
		  	<strong>Note:</strong> This is a letter on a blackhighlighter system.  If you have any
		  	question about what that means, see <a href="http://blackhighlighter.hostilefork.com/" target="_blank">
		  	http://blackhighlighter.hostilefork.com/</a>.
		</p></div>
	</div>
</div>